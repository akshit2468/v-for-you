<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Important Question ğŸ˜Œ</title>
  <link rel="stylesheet" href="styles.css"/>

  <!-- âœ… Only added to keep NO button inside the screen (prevents vanish) -->
  <style>
    .screen{ position:relative; overflow:hidden; }
    #choiceRow{ position:relative; }
    #noBtn{
      position:absolute;
      /* start near the right side of the Yes button row */
      right: 0;
      top: 0;
      transform: translate(0,0);
      will-change: left, top, transform;
      transition: left .22s ease, top .22s ease, transform .22s ease;
    }
  </style>
</head>

<body class="theme-valentine fade-in">
  <div class="bg" aria-hidden="true">
    <div class="glow g1"></div><div class="glow g2"></div><div class="glow g3"></div>
  </div>
  <div class="hearts" aria-hidden="true"></div>

  <main class="stage">
    <section class="screen" id="screen">
      <div class="topline">
        <div class="tag">Incoming Question</div>
        <div class="daycount">Question Time</div>
      </div>

      <h1 class="headline">Hey <span id="name">Akshya aka kuchupuchu</span> â¤ï¸</h1>
      <div class="subtitle">Donâ€™t panic ğŸ˜­</div>

      <img class="bear" src="assets/bears/ask.webp" alt="cute bear" />

      <p class="line" id="line">Okayâ€¦ before we start the Valentine Week ğŸ˜Œ</p>
      <p class="hint" id="hint">(Tap Continue Boss)</p>

      <div class="actions" id="continueRow">
        <button class="btn" id="continueBtn" type="button">Continue</button>
      </div>

      <div class="actions" id="choiceRow" style="display:none;">
        <button class="btn" id="yesBtn" type="button">Yes ğŸ˜Œâ¤ï¸</button>
        <button class="btn ghost" id="noBtn" type="button">No ğŸ™„</button>
      </div>

      <p class="hint" id="noHint" style="display:none; margin-top:14px;">
        (Choose wisely. Iâ€™m sensitive. ğŸ™‚)
      </p>
    </section>
  </main>

  <script>
    const herName = "Akshya"; // change name here too
    document.getElementById("name").textContent = herName;

    const askLines = [
      "Okayâ€¦ before we start Valentine Week ğŸ˜Œ",
      "I have one very serious question.",
      "Likeâ€¦ government-level serious.",
      "Will you be my Valentine? â¤ï¸"
    ];

    const lineEl = document.getElementById("line");
    const hintEl = document.getElementById("hint");
    const contBtn = document.getElementById("continueBtn");
    const continueRow = document.getElementById("continueRow");
    const choiceRow = document.getElementById("choiceRow");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const noHint = document.getElementById("noHint");
    const screen = document.getElementById("screen");

    let idx = 0;
    let navigating = false;

    function setLine(t){
      lineEl.style.opacity = "0";
      lineEl.style.transform = "translateY(8px)";
      setTimeout(() => {
        lineEl.textContent = t;
        lineEl.style.transition = "opacity .28s ease, transform .28s ease";
        lineEl.style.opacity = "1";
        lineEl.style.transform = "translateY(0)";
      }, 120);
    }

    contBtn.addEventListener("click", () => {
      idx++;
      if (idx < askLines.length) setLine(askLines[idx]);

      if (idx === askLines.length - 1) {
        continueRow.style.display = "none";
        hintEl.style.display = "none";
        choiceRow.style.display = "flex";
        noHint.style.display = "block";

        // âœ… Ensure NO starts visible and inside bounds when choiceRow appears
        initNoButton();
      }
    });

    // âœ… funny NO behavior (farther + never vanishes)
    let noCount = 0;

    function clamp(v, min, max){ return Math.max(min, Math.min(max, v)); }

    function initNoButton(){
      // Put NO button on the right of the row (absolute)
      noBtn.style.left = "";
      noBtn.style.top = "";
      noBtn.style.right = "0px";
      noBtn.style.transform = "translate(0,0)";
    }

    function moveNoButton(){
      // Move inside the card area, far away, and never outside
      const r = screen.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      const pad = 18; // spacing from edges
      const minX = pad;
      const maxX = r.width - b.width - pad;
      const minY = pad + 70; // avoid the very top header area
      const maxY = r.height - b.height - pad;

      let x = minX + Math.random() * (maxX - minX);
      let y = minY + Math.random() * (maxY - minY);

      x = clamp(x, minX, maxX);
      y = clamp(y, minY, maxY);

      // switch from "right" anchoring to exact positioning
      noBtn.style.right = "auto";
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "translate(0,0)";
    }

    // Runs away on hover too (prevents â€œvanish on hoverâ€ issue)
    noBtn.addEventListener("mouseenter", () => {
      if (noBtn.disabled) return;
      moveNoButton();
    });

    noBtn.addEventListener("click", () => {
      noCount++;
      moveNoButton();

      const jokes = [
        "No? ğŸ˜­ okay waitâ€¦ try again.",
        "Button said: â€˜nahâ€™ and ran away ğŸƒâ€â™‚ï¸ğŸ’¨",
        "Bro thatâ€™s illegal. Click Yes.",
        "Okay fineâ€¦ but Iâ€™m still cute soâ€¦",
        "At this point the No button is just cardio."
      ];
      noHint.textContent = jokes[Math.min(noCount - 1, jokes.length - 1)];

      if (noCount >= 5) {
        noHint.textContent = "Okay. I removed the No option emotionally. ğŸ™‚â¤ï¸";
        noBtn.disabled = true;
      }
    });

    yesBtn.addEventListener("click", () => {
      if (navigating) return;
      navigating = true;
      document.body.classList.add("fade-out");
      setTimeout(() => location.href = "rose.html", 260);
    });

    // hearts (same vibe)
    const heartsLayer = document.querySelector(".hearts");
    function spawnHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.style.left = `${Math.random() * 100}vw`;

      const size = 10 + Math.random() * 16;
      h.style.width = `${size}px`;
      h.style.height = `${size}px`;

      const styles = getComputedStyle(document.body);
      const c1 = styles.getPropertyValue("--accent").trim() || "#ff4d7d";
      const c2 = styles.getPropertyValue("--accent2").trim() || "#ff7aa6";
      const colors = [c1, c2, "#ffd1df", "#ffffff"];
      h.style.color = colors[Math.floor(Math.random() * colors.length)];

      const duration = 6 + Math.random() * 6;
      h.style.animationDuration = `${duration}s`;
      h.style.opacity = (0.22 + Math.random() * 0.55).toFixed(2);

      heartsLayer.appendChild(h);
      setTimeout(() => h.remove(), duration * 1000);
    }
    setInterval(spawnHeart, 420);
  </script>

  <audio id="bgm" preload="auto" loop>
    <source src="/v-for-you/assets/music.mp3" type="audio/mpeg">
  </audio>

  <script src="music.js"></script>

</body>
</html>
